<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="PassionLecture.Views.LibraryPage"
             Title="Ma BibliothÃ¨que">

    <Grid RowDefinitions="Auto,*"
          Padding="10">
        
        <Grid Grid.Row="0" 
              ColumnDefinitions="*,*"
              Margin="0,0,0,10">
            <Button Grid.Column="0"
                    Text="Tag"
                    Command="{Binding FilterByTagCommand}"
                    Margin="5,0"
                    BackgroundColor="#9C27B0"
                    TextColor="White"/>
            <Button Grid.Column="1"
                    Text="Date"
                    Command="{Binding SortByDateCommand}"
                    Margin="5,0"
                    BackgroundColor="#4CAF50"
                    TextColor="White"/>
        </Grid>

        <CollectionView Grid.Row="1"
                       ItemsSource="{Binding Books}"
                       SelectionMode="Single"
                       SelectionChanged="OnBookSelected">
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Grid Padding="10" 
                          ColumnDefinitions="Auto,*"
                          RowDefinitions="Auto,Auto">
                        <Image Grid.RowSpan="2"
                               Grid.Column="0"
                               Source="{Binding CoverImageSource}"
                               HeightRequest="150"
                               WidthRequest="100"
                               Aspect="AspectFill"
                               Margin="0,0,10,0"/>
                        <Label Grid.Row="0"
                               Grid.Column="1"
                               Text="{Binding Title}"
                               FontSize="18"
                               FontAttributes="Bold"/>
                        <Label Grid.Row="1"
                               Grid.Column="1"
                               Text="{Binding CreatedAt, StringFormat='{0:d MMMM yyyy}'}"
                               TextColor="Gray"/>
                    </Grid>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>
    </Grid>

</ContentPage> 